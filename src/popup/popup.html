<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Crypto Wallet</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      width: 360px;
      min-height: 600px;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: #333;
    }

    .container {
      background: white;
      min-height: 600px;
      display: flex;
      flex-direction: column;
    }

    .header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 20px;
      text-align: center;
    }

    .header h1 {
      font-size: 24px;
      font-weight: 600;
      margin-bottom: 5px;
    }

    .header .network {
      font-size: 12px;
      opacity: 0.9;
      margin-top: 8px;
      background: rgba(255, 255, 255, 0.2);
      padding: 4px 12px;
      border-radius: 12px;
      display: inline-block;
    }

    .content {
      flex: 1;
      padding: 20px;
    }

    .screen {
      display: none;
    }

    .screen.active {
      display: block;
    }

    .balance {
      text-align: center;
      margin: 30px 0;
    }

    .balance-amount {
      font-size: 36px;
      font-weight: 700;
      color: #667eea;
      margin: 10px 0;
    }

    .balance-usd {
      font-size: 18px;
      color: #888;
    }

    .account {
      background: #f7f7f7;
      border-radius: 12px;
      padding: 15px;
      margin: 20px 0;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .account-info {
      flex: 1;
    }

    .account-name {
      font-weight: 600;
      margin-bottom: 5px;
    }

    .account-address {
      font-size: 12px;
      color: #888;
      font-family: 'Courier New', monospace;
    }

    .button {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      width: 100%;
      margin: 10px 0;
      transition: transform 0.2s;
    }

    .button:hover {
      transform: translateY(-2px);
    }

    .button:active {
      transform: translateY(0);
    }

    .button-secondary {
      background: #f7f7f7;
      color: #667eea;
    }

    .input-group {
      margin: 15px 0;
    }

    .input-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      font-size: 14px;
    }

    .input-group input,
    .input-group textarea {
      width: 100%;
      padding: 12px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      font-size: 14px;
      font-family: inherit;
      transition: border-color 0.2s;
    }

    .input-group input:focus,
    .input-group textarea:focus {
      outline: none;
      border-color: #667eea;
    }

    .input-group textarea {
      resize: vertical;
      min-height: 80px;
      font-family: 'Courier New', monospace;
      font-size: 12px;
    }

    .actions {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin: 20px 0;
    }

    .action-btn {
      background: white;
      border: 2px solid #e0e0e0;
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      cursor: pointer;
      transition: all 0.2s;
    }

    .action-btn:hover {
      border-color: #667eea;
      background: #f7f7f7;
    }

    .action-btn-icon {
      font-size: 24px;
      margin-bottom: 8px;
    }

    .action-btn-label {
      font-size: 14px;
      font-weight: 600;
      color: #333;
    }

    .mnemonic-display {
      background: #f7f7f7;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      padding: 15px;
      font-family: 'Courier New', monospace;
      font-size: 14px;
      line-height: 1.8;
      margin: 15px 0;
      word-break: break-word;
    }

    .warning {
      background: #fff3cd;
      border: 2px solid #ffc107;
      border-radius: 8px;
      padding: 15px;
      margin: 15px 0;
      font-size: 13px;
      line-height: 1.6;
    }

    .warning strong {
      display: block;
      margin-bottom: 5px;
      color: #856404;
    }

    .error {
      background: #f8d7da;
      border: 2px solid #dc3545;
      border-radius: 8px;
      padding: 15px;
      margin: 15px 0;
      font-size: 13px;
      color: #721c24;
    }

    .success {
      background: #d4edda;
      border: 2px solid #28a745;
      border-radius: 8px;
      padding: 15px;
      margin: 15px 0;
      font-size: 13px;
      color: #155724;
    }

    .loading {
      text-align: center;
      padding: 40px;
    }

    .spinner {
      border: 3px solid #f3f3f3;
      border-top: 3px solid #667eea;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
      margin: 0 auto;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .copy-btn {
      background: #667eea;
      color: white;
      border: none;
      padding: 6px 12px;
      border-radius: 6px;
      font-size: 12px;
      cursor: pointer;
      margin-left: 10px;
    }

    .tabs {
      display: flex;
      border-bottom: 2px solid #e0e0e0;
      margin-bottom: 20px;
    }

    .tab {
      flex: 1;
      padding: 12px;
      text-align: center;
      cursor: pointer;
      font-weight: 600;
      color: #888;
      border-bottom: 2px solid transparent;
      margin-bottom: -2px;
      transition: all 0.2s;
    }

    .tab.active {
      color: #667eea;
      border-bottom-color: #667eea;
    }

    .hidden {
      display: none !important;
    }

    .network-item {
      background: #f7f7f7;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      padding: 12px 15px;
      margin-bottom: 10px;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .network-item:hover {
      border-color: #667eea;
      background: #f0f0ff;
    }

    .network-item.active {
      border-color: #667eea;
      background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
    }

    .network-item-info {
      flex: 1;
    }

    .network-item-name {
      font-weight: 600;
      font-size: 14px;
      margin-bottom: 3px;
    }

    .network-item-chain {
      font-size: 11px;
      color: #888;
    }

    .network-item-badge {
      background: #667eea;
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 10px;
      font-weight: 600;
    }

    .token-item {
      background: #f7f7f7;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      padding: 12px 15px;
      margin-bottom: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .token-item-info {
      flex: 1;
    }

    .token-item-name {
      font-weight: 600;
      font-size: 14px;
      margin-bottom: 3px;
    }

    .token-item-address {
      font-size: 11px;
      color: #888;
      font-family: 'Courier New', monospace;
    }

    .token-item-balance {
      text-align: right;
    }

    .token-item-amount {
      font-weight: 600;
      font-size: 14px;
      color: #667eea;
    }

    .token-item-symbol {
      font-size: 11px;
      color: #888;
    }

    .token-item-remove {
      background: #dc3545;
      color: white;
      border: none;
      padding: 6px 10px;
      border-radius: 6px;
      font-size: 11px;
      cursor: pointer;
      margin-left: 10px;
    }

    .token-item-remove:hover {
      background: #c82333;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>Crypto Wallet</h1>
      <div class="network" id="network-name">Ethereum Mainnet</div>
    </div>

    <div class="content">
      <!-- Welcome Screen -->
      <div id="welcome-screen" class="screen">
        <h2 style="margin: 40px 0 20px; text-align: center;">Welcome to Crypto Wallet</h2>
        <p style="text-align: center; color: #888; margin-bottom: 40px;">
          A secure multi-chain cryptocurrency wallet
        </p>
        <button class="button" id="create-wallet-btn">Create New Wallet</button>
        <button class="button button-secondary" id="import-wallet-btn">Import Existing Wallet</button>
      </div>

      <!-- Create Wallet Screen -->
      <div id="create-wallet-screen" class="screen">
        <h2 style="margin-bottom: 20px;">Create New Wallet</h2>

        <div class="warning">
          <strong>Important!</strong>
          Your secret recovery phrase will be shown only once. Make sure to write it down and store it securely.
        </div>

        <div class="input-group">
          <label for="create-password">Password</label>
          <input type="password" id="create-password" placeholder="Enter a strong password">
        </div>

        <div class="input-group">
          <label for="create-password-confirm">Confirm Password</label>
          <input type="password" id="create-password-confirm" placeholder="Confirm your password">
        </div>

        <div id="create-error" class="error hidden"></div>

        <button class="button" id="create-submit-btn">Create Wallet</button>
        <button class="button button-secondary" id="create-back-btn">Back</button>
      </div>

      <!-- Show Mnemonic Screen -->
      <div id="mnemonic-screen" class="screen">
        <h2 style="margin-bottom: 20px;">Secret Recovery Phrase</h2>

        <div class="warning">
          <strong>Write this down!</strong>
          This is the only way to recover your wallet. Never share it with anyone.
        </div>

        <div class="mnemonic-display" id="mnemonic-display"></div>

        <button class="button" id="copy-mnemonic-btn">Copy to Clipboard</button>
        <button class="button" id="mnemonic-continue-btn">I've Saved It</button>
      </div>

      <!-- Import Wallet Screen -->
      <div id="import-wallet-screen" class="screen">
        <h2 style="margin-bottom: 20px;">Import Wallet</h2>

        <div class="input-group">
          <label for="import-mnemonic">Secret Recovery Phrase</label>
          <textarea id="import-mnemonic" placeholder="Enter your 12 or 24 word recovery phrase"></textarea>
        </div>

        <div class="input-group">
          <label for="import-password">Password</label>
          <input type="password" id="import-password" placeholder="Enter a password">
        </div>

        <div class="input-group">
          <label for="import-password-confirm">Confirm Password</label>
          <input type="password" id="import-password-confirm" placeholder="Confirm your password">
        </div>

        <div id="import-error" class="error hidden"></div>

        <button class="button" id="import-submit-btn">Import Wallet</button>
        <button class="button button-secondary" id="import-back-btn">Back</button>
      </div>

      <!-- Unlock Screen -->
      <div id="unlock-screen" class="screen">
        <h2 style="margin: 60px 0 40px; text-align: center;">Unlock Wallet</h2>

        <div class="input-group">
          <label for="unlock-password">Password</label>
          <input type="password" id="unlock-password" placeholder="Enter your password">
        </div>

        <div id="unlock-error" class="error hidden"></div>

        <button class="button" id="unlock-btn">Unlock</button>
      </div>

      <!-- Main Wallet Screen -->
      <div id="wallet-screen" class="screen">
        <div class="balance">
          <div style="color: #888; font-size: 14px;">Balance</div>
          <div class="balance-amount" id="balance-amount">0.00</div>
          <div class="balance-usd" id="balance-symbol">ETH</div>
        </div>

        <div class="account" id="current-account">
          <div class="account-info">
            <div class="account-name">Account 1</div>
            <div class="account-address" id="account-address">0x0000...0000</div>
          </div>
          <button class="copy-btn" id="copy-address-btn">Copy</button>
        </div>

        <div class="actions">
          <div class="action-btn" id="send-btn">
            <div class="action-btn-icon">↑</div>
            <div class="action-btn-label">Send</div>
          </div>
          <div class="action-btn" id="receive-btn">
            <div class="action-btn-icon">↓</div>
            <div class="action-btn-label">Receive</div>
          </div>
        </div>

        <div class="tabs">
          <div class="tab active" data-tab="tokens">Tokens</div>
          <div class="tab" data-tab="networks">Networks</div>
          <div class="tab" data-tab="settings">Settings</div>
        </div>


        <div id="tokens-tab" class="tab-content hidden">
          <div style="margin-bottom: 20px;">
            <h3 style="font-size: 14px; font-weight: 600; margin-bottom: 15px;">Connected Address Tokens</h3>
            <div id="tokens-list-connected"></div>
          </div>
          <div id="spoofed-tokens-section" style="margin-bottom: 20px; display: none;">
            <h3 style="font-size: 14px; font-weight: 600; margin-bottom: 15px;">Spoofed Address Tokens</h3>
            <div id="tokens-list-spoofed"></div>
          </div>
          <button class="button button-secondary" id="add-token-btn">Add Token</button>
        </div>

        <div id="networks-tab" class="tab-content hidden">
          <div style="margin-bottom: 20px;">
            <h3 style="font-size: 14px; font-weight: 600; margin-bottom: 15px;">Select Network</h3>
            <div id="networks-list"></div>
          </div>
          <button class="button button-secondary" id="update-networks-btn">Update Default Networks</button>
          <button class="button button-secondary" id="add-network-btn">Add Custom Network</button>
        </div>

        <div id="settings-tab" class="tab-content hidden">
          <button class="button button-secondary" id="lock-wallet-btn">Lock Wallet</button>
          <button class="button button-secondary" id="show-mnemonic-btn">Show Recovery Phrase</button>

          <div style="margin-top: 30px; padding-top: 20px; border-top: 2px solid #e0e0e0;">
            <h3 style="font-size: 16px; font-weight: 600; margin-bottom: 15px;">Testing Features</h3>

            <div style="background: #e7f3ff; border: 2px solid #2196F3; border-radius: 8px; padding: 15px; margin-bottom: 15px;">
              <strong style="color: #0d47a1; display: block; margin-bottom: 5px;">Address Spoofing (Testing Only)</strong>
              <span style="color: #0d47a1; font-size: 13px;">Show a different address to dApps while signing with your real address</span>
            </div>

            <div style="margin-bottom: 15px;">
              <label style="display: flex; align-items: center; font-size: 14px; cursor: pointer;">
                <input type="checkbox" id="spoof-enabled-checkbox" style="margin-right: 8px;">
                <span style="font-weight: 600;">Enable Address Spoofing</span>
              </label>
            </div>

            <div class="input-group" id="spoof-address-group" style="display: none;">
              <label for="spoof-address">Spoofed Address</label>
              <input type="text" id="spoof-address" placeholder="0x...">
            </div>

            <button class="button" id="save-spoof-btn" style="display: none;">Save Spoofing Config</button>
          </div>

          <div style="margin-top: 30px; padding-top: 20px; border-top: 2px solid #e0e0e0;">
            <h3 style="font-size: 16px; font-weight: 600; margin-bottom: 15px;">DeFi Interactor Module</h3>

            <div style="background: #e7f3ff; border: 2px solid #2196F3; border-radius: 8px; padding: 15px; margin-bottom: 15px;">
              <strong style="color: #0d47a1; display: block; margin-bottom: 5px;">Token Transfer Security</strong>
              <span style="color: #0d47a1; font-size: 13px;">Route token transfers through your Safe's DeFi Interactor Module for role-based access control and transfer limits</span>
            </div>

            <div id="defi-config-list" style="margin-bottom: 15px;"></div>

            <div style="background: #f7f7f7; border: 2px solid #e0e0e0; border-radius: 8px; padding: 15px; margin-bottom: 15px;">
              <h4 style="font-size: 14px; font-weight: 600; margin-bottom: 12px;">Add Module Configuration</h4>

              <div style="background: #e7f3ff; border: 1px solid #2196F3; border-radius: 6px; padding: 10px; margin-bottom: 12px;">
                <div style="font-size: 12px; color: #0d47a1;">
                  <strong>Current Network:</strong> <span id="defi-current-network">-</span>
                </div>
                <div style="font-size: 12px; color: #0d47a1; margin-top: 4px;">
                  <strong>Chain ID:</strong> <span id="defi-current-chain-id">-</span>
                </div>
              </div>

              <div class="input-group">
                <label for="defi-module-address">Module Contract Address</label>
                <input type="text" id="defi-module-address" placeholder="0x...">
              </div>

              <div style="margin-bottom: 15px;">
                <label style="display: flex; align-items: center; font-size: 14px; cursor: pointer;">
                  <input type="checkbox" id="defi-enabled-checkbox" style="margin-right: 8px;" checked>
                  <span style="font-weight: 600;">Enable for this network</span>
                </label>
              </div>

              <button class="button" id="save-defi-config-btn">Add/Update Configuration</button>
            </div>
          </div>

          <div style="margin-top: 30px; padding-top: 20px; border-top: 2px solid #e0e0e0;">
            <div style="background: #fff3cd; border: 2px solid #ffc107; border-radius: 8px; padding: 15px; margin-bottom: 15px;">
              <strong style="color: #856404; display: block; margin-bottom: 5px;">⚠️ Danger Zone</strong>
              <span style="color: #856404; font-size: 13px;">This action will delete all wallet data. Make sure you have saved your recovery phrase!</span>
            </div>
            <div style="margin-bottom: 10px;">
              <label style="display: flex; align-items: center; font-size: 13px; cursor: pointer;">
                <input type="checkbox" id="reset-confirm-checkbox" style="margin-right: 8px;">
                <span>I confirm I have saved my recovery phrase</span>
              </label>
            </div>
            <button class="button" id="reset-wallet-btn" style="background: #dc3545; width: 100%;" disabled>Reset Wallet</button>
          </div>
        </div>
      </div>

      <!-- Send Screen -->
      <div id="send-screen" class="screen">
        <h2 style="margin-bottom: 20px;">Send</h2>

        <div class="input-group">
          <label for="send-to">To Address</label>
          <input type="text" id="send-to" placeholder="0x...">
        </div>

        <div class="input-group">
          <label for="send-amount">Amount</label>
          <input type="text" id="send-amount" placeholder="0.0">
        </div>

        <div class="input-group">
          <label for="send-gas">Gas Limit (optional)</label>
          <input type="text" id="send-gas" placeholder="21000">
        </div>

        <div id="send-error" class="error hidden"></div>
        <div id="send-success" class="success hidden"></div>

        <button class="button" id="send-submit-btn">Send Transaction</button>
        <button class="button button-secondary" id="send-back-btn">Back</button>
      </div>

      <!-- Receive Screen -->
      <div id="receive-screen" class="screen">
        <h2 style="margin-bottom: 20px;">Receive</h2>

        <div style="text-align: center; margin: 30px 0;">
          <div style="font-size: 14px; color: #888; margin-bottom: 20px;">
            Share your address to receive funds
          </div>

          <div style="background: #f7f7f7; border: 2px solid #e0e0e0; border-radius: 8px; padding: 20px; margin: 20px 0;">
            <div id="receive-address" style="font-family: 'Courier New', monospace; font-size: 14px; word-break: break-all; margin-bottom: 15px;">
              0x0000...0000
            </div>
            <button class="button" id="copy-receive-address-btn">Copy Address</button>
          </div>
        </div>

        <button class="button button-secondary" id="receive-back-btn">Back</button>
      </div>

      <!-- Show Recovery Phrase Screen -->
      <div id="show-mnemonic-screen" class="screen">
        <h2 style="margin-bottom: 20px;">Secret Recovery Phrase</h2>

        <div class="warning">
          <strong>Warning!</strong>
          Never share your recovery phrase with anyone. Anyone with this phrase can access your funds.
        </div>

        <div class="mnemonic-display" id="mnemonic-display-view"></div>

        <button class="button" id="copy-mnemonic-view-btn">Copy to Clipboard</button>
        <button class="button button-secondary" id="mnemonic-view-back-btn">Back</button>
      </div>

      <!-- Add Token Screen -->
      <div id="add-token-screen" class="screen">
        <h2 style="margin-bottom: 20px;">Add Token</h2>

        <div class="input-group">
          <label for="token-address">Token Contract Address</label>
          <input type="text" id="token-address" placeholder="0x...">
        </div>

        <div class="input-group">
          <label for="token-symbol">Token Symbol</label>
          <input type="text" id="token-symbol" placeholder="e.g. USDT">
        </div>

        <div class="input-group">
          <label for="token-name">Token Name</label>
          <input type="text" id="token-name" placeholder="e.g. Tether USD">
        </div>

        <div class="input-group">
          <label for="token-decimals">Decimals</label>
          <input type="number" id="token-decimals" placeholder="18">
        </div>

        <div id="add-token-error" class="error hidden"></div>
        <div id="add-token-success" class="success hidden"></div>

        <button class="button" id="add-token-submit-btn">Add Token</button>
        <button class="button button-secondary" id="add-token-back-btn">Back</button>
      </div>

      <!-- Add Custom Network Screen -->
      <div id="add-network-screen" class="screen">
        <h2 style="margin-bottom: 20px;">Add Custom Network</h2>

        <div class="input-group">
          <label for="network-name">Network Name</label>
          <input type="text" id="network-name" placeholder="e.g. My Custom Network">
        </div>

        <div class="input-group">
          <label for="network-rpc">RPC URL</label>
          <input type="text" id="network-rpc" placeholder="https://...">
        </div>

        <div class="input-group">
          <label for="network-chain-id">Chain ID</label>
          <input type="number" id="network-chain-id" placeholder="e.g. 1">
        </div>

        <div class="input-group">
          <label for="network-symbol">Currency Symbol</label>
          <input type="text" id="network-symbol" placeholder="e.g. ETH">
        </div>

        <div class="input-group">
          <label for="network-explorer">Block Explorer URL (optional)</label>
          <input type="text" id="network-explorer" placeholder="https://...">
        </div>

        <div id="add-network-error" class="error hidden"></div>
        <div id="add-network-success" class="success hidden"></div>

        <button class="button" id="add-network-submit-btn">Add Network</button>
        <button class="button button-secondary" id="add-network-back-btn">Back</button>
      </div>
    </div>
  </div>

  <script src="popup.js"></script>
</body>
</html>
